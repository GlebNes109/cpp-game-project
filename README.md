## Bomberman

<div style="text-align: center;font-size: 24px; font-weight: bold;">
  Команда СНГ++
</div>

### Уникальность идеи
Это консольная версия bomberman, предназначенная для комфортной игры без использования графического окружения. Если вы установили linux, но еще не успели поставить окружение и вам срочно надо поиграть в бомбермена - эта игра для вас!

### Инструкция по запуску на MacOS (стабильность не гарантируется)
Может не работать на MacBook с Intel процессорами.
Установите ncurses (предварительно установить homebrew)
```
brew install ncurses
```
билд проекта:
```
g++ -std=c++17 main.cpp GameSpaceController.cpp BombController.cpp EnemyController.cpp PlayerController.cpp -o bomberman -lncursesw \
    -I/opt/homebrew/opt/ncurses/include \
    -L/opt/homebrew/opt/ncurses/lib
```
запуск проекта:
```
./bomberman
```

### Инструкция по запуску на Ubuntu

предварительно установить библиотеку ncurses:

```
sudo apt install libncurses5-dev libncursesw5-dev
```

для запуска выполните в терминале:
```
g++ main.cpp GameSpaceController.cpp BombController.cpp EnemyController.cpp PlayerController.cpp -o bomberman -lncurses && ./bomberman
```


### Идея
В качестве проекта мы выбрали консольную версию Bomberman на C++. 
Механика игры будет изменена по сравнению с оригинальной игрой. 
*примерные* требования (могут немного измениться в будущем)

**Описание представленного функционала**
* Уровни нарисованы единоразово, автогенерации уровней нет
* Уровни представляют из себя лабиринт на поле из клеток N x N клеток, каждая клетка - это либо стена, либо свободное пространство.
* Геймплей - игрок может двигаться вверх/вниз/влево/вправо по кнопкам wasd, может ставить бомбы на кнопку F, которые уничтожают врагов. Цель - уничтожить всех врагов
* Бомба взрывается по X и по Y на N клеток через секунду после установки.
* Игрок может ставить только определенное количество бомб
* Враги рассчитывают растояние до игрока и делают оптимальный ход (ИИ для врагов)
* Игровое поле в терминале обновляется с помощью библиотеки ncurses и с использованием различных цветов для отрисовки разных частей игры (игрок отрисовывается зеленым цветом, бомбы - желтым, враги - красным)

**Системные требования**
* ОС Linux, любой дистрибутив
* 15 мб свободного места
* ncurses

### Команда

- Захар - разработчик
- Глеб - техлид
- Антон - дизайнер

### Формат выполнения 

github - этот репозиторий (ссылка - https://github.com/GlebNes109/cpp-game-project)

### Структура проекта

Структура проекта довольно простая, и в то же время этот проект можно легко масштабировать. Все слои логики разделены на отдельные классы - например, логика ИИ для врагов в EnemyController, отрисовка и контроль всего игрового пространства в GameSpaceController и т д. Это позволит легко добавить функционал в будущем без изменения остальных классов и без ошибок

#### Отрисовка врагов, бомб, взрывов и хранение текущего состояния

В main (основном файле) инициализируются векторы, хранящие информацию о врагах, бомбах и взрывах. Далее во все остальные классы (контроллеры) передаются ссылки на эти массивы, что позволяет менять их в одном контроллере, и затем отрисовывать в другом. Отрисовка происходит в основном игровом цикле каждые 0.001 секунд

#### Таймеры

Таймеры нужны для того чтобы корректно двигать врагов, если просто двигать врагов, то они будут двигаться очень быстро, поэтому между сдвигами врагов делается пауза. В самом начале работы программы засекаются все таймеры, после чего по истечении времени выполняется сдвиг врагов. Игрок также двигается по таймеру, это необходимо чтобы ограничить его скорость. В противном случае его скорость будет зависеть только от того, насколько быстро он нажимает кнопки, что было бы неправильно

#### Взрыв бомбы

У каждой бомбы есть счетчик времени до взрыва. Каждые 0.2 секунды счетчик каждой бомбы тикает на -1, и состояние всех бомб обновляется - если счетчик достигает 0, происходит взрыв. Взрыв - это отдельная структура, которая добавляется в вектор со взрывами и отрисовывается так же как и другие части игры.

#### ИИ для врагов

Враги преследуют игрока, алгоритм движения врагов - вычисляется разница между координатами врага и игрока, после чего враг идет по той координате, где эта разница больше. Если враг не может идти в ту сторону, он идет в сторону игрока, но туда, где разница меньше. В случае, если и тут препятствие, враг идет туда, где препятствия нет.